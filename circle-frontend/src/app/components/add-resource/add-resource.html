<!--
  Add Resource Form Template
  
  Material Design form for creating new resources.
  Uses reactive forms with validation and error handling.
  
  Key concepts for Angular/Node.js beginners:
  - [formGroup] binds the form to the component's FormGroup
  - formControlName binds inputs to specific form controls
  - mat-error shows validation errors when field is invalid and touched
  - (ngSubmit) handles form submission
  - Disabled state prevents multiple submissions
-->

<mat-card class="add-resource-form">
  <mat-card-header>
    <mat-card-title>Add New Resource</mat-card-title>
    <mat-card-subtitle>Share something with your circle</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <!-- Error message -->
    @if (errorMessage()) {
      <div class="error-message">
        <mat-icon color="warn">error</mat-icon>
        <span>{{ errorMessage() }}</span>
      </div>
    }

    <!-- Resource form -->
    <form [formGroup]="resourceForm" (ngSubmit)="onSubmit()">
      <!-- Resource name field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Resource Name</mat-label>
        <input 
          matInput 
          formControlName="name" 
          placeholder="e.g., Lawn Mower, Power Drill, Car"
          maxlength="100">
        <mat-hint>What would you like to share?</mat-hint>
        <mat-error>{{ getFieldError('name') }}</mat-error>
      </mat-form-field>

      <!-- Resource description field -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea 
          matInput 
          formControlName="description" 
          placeholder="Describe your resource, any special instructions, etc."
          rows="4"
          maxlength="500">
        </textarea>
        <mat-hint>Provide details about your resource</mat-hint>
        <mat-error>{{ getFieldError('description') }}</mat-error>
      </mat-form-field>
    </form>
  </mat-card-content>

  <mat-card-actions>
    <!-- Cancel button -->
    <button 
      mat-button 
      (click)="onCancel()" 
      [disabled]="isLoading()">
      Cancel
    </button>

    <!-- Submit button -->
    <button 
      mat-raised-button 
      color="primary" 
      (click)="onSubmit()" 
      [disabled]="resourceForm.invalid || isLoading()">
      @if (isLoading()) {
        <mat-icon>hourglass_empty</mat-icon>
        Creating...
      } @else {
        <mat-icon>add</mat-icon>
        Add Resource
      }
    </button>
  </mat-card-actions>
</mat-card>
